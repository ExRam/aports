From 9df842211259bff497ecad76051f557c6878a655 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Timo=20Ter=C3=A4s?= <timo.teras@iki.fi>
Date: Mon, 9 Dec 2024 13:30:40 +0200
Subject: [PATCH] solver: make dependencies only packages selectable

fixes 74f67ab8 fix fetching of depdencies only packages
fixes #11056

(cherry picked from commit 78c3bdc03cbd8cd62d2f13526d86291b0585b71c)
---
 src/solver.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/src/solver.c b/src/solver.c
index d6700ceb..f3ec1b45 100644
--- a/src/solver.c
+++ b/src/solver.c
@@ -205,6 +205,7 @@ static void discover_name(struct apk_solver_state *ss, struct apk_name *name)
 			pkg->ss.pkg_selectable =
 				(pkg->repos & db->available_repos) ||
 				pkg->cached_non_repository ||
+				pkg->installed_size == 0 ||
 				pkg->ipkg;
 
 			/* Prune install_if packages that are no longer available,
-- 
GitLab

